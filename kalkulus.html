<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Driving Safety Simulator - Two Car's</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        color: white;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 30px;
        padding: 25px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        backdrop-filter: blur(10px);
      }

      h1 {
        font-size: 2.8em;
        margin-bottom: 10px;
        color: #fff;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .subtitle {
        font-size: 1.3em;
        opacity: 0.9;
        color: #a8d8ff;
      }

      .dashboard {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 25px;
        margin-bottom: 30px;
      }

      .card {
        background: rgba(255, 255, 255, 0.08);
        padding: 25px;
        border-radius: 20px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .controls {
        grid-column: 1 / -1;
      }

      h2 {
        font-size: 1.8em;
        margin-bottom: 20px;
        color: #4fc3f7;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .input-group {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 25px;
      }

      .input-field {
        display: flex;
        flex-direction: column;
      }

      label {
        margin-bottom: 8px;
        font-weight: 600;
        color: #bbdefb;
        font-size: 1.1em;
      }

      input {
        padding: 15px;
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.9);
        font-size: 1.1em;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      input:focus {
        outline: none;
        border-color: #4fc3f7;
        background: white;
        transform: translateY(-2px);
      }

      .button-group {
        display: flex;
        gap: 15px;
        margin-bottom: 25px;
      }

      button {
        padding: 16px 32px;
        border: none;
        border-radius: 12px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .start-btn {
        background: linear-gradient(135deg, #00c853, #64dd17);
        color: white;
      }

      .start-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 200, 83, 0.4);
      }

      .reset-btn {
        background: linear-gradient(135deg, #ff9100, #ffab40);
        color: white;
      }

      .reset-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(255, 145, 0, 0.4);
      }

      .theory-btn {
        background: linear-gradient(135deg, #2979ff, #448aff);
        color: white;
      }

      .theory-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(41, 121, 255, 0.4);
      }

      .simulation-area {
        position: relative;
        height: 180px;
        background: linear-gradient(180deg, #2c3e50, #34495e);
        border-radius: 15px;
        overflow: hidden;
        margin-top: 20px;
        border: 3px solid rgba(255, 255, 255, 0.1);
      }

      .road {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 80px;
        background: #555;
        border-top: 3px dashed #fff;
      }

      .car {
        position: absolute;
        bottom: 25px;
        font-size: 3em;
        transition: left 0.1s linear;
        filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5));
        z-index: 10;
      }

      #ourCar {
        left: 50px;
      }

      #frontCar {
        left: 250px;
      }

      .results {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-top: 20px;
      }

      .result-item {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .result-label {
        font-size: 1em;
        color: #bbdefb;
        margin-bottom: 8px;
      }

      .result-value {
        font-size: 1.8em;
        font-weight: bold;
        color: #fff;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      }

      .math-concept {
        background: rgba(255, 255, 255, 0.05);
        padding: 12px;
        border-radius: 8px;
        margin-top: 10px;
        font-size: 0.9em;
        color: #90caf9;
        border-left: 3px solid #4fc3f7;
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-8px);
        }
        50% {
          transform: translateX(8px);
        }
        75% {
          transform: translateX(-8px);
        }
      }

      @keyframes crash {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.3);
        }
        100% {
          transform: scale(1.2);
        }
      }

      @media (max-width: 768px) {
        .dashboard {
          grid-template-columns: 1fr;
        }

        .input-group {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ðŸš— Driving Safety Simulator - Two Car's</h1>
        <div class="subtitle">
          Analisis Tabrakan dengan Konsep Nilai Mutlak dan Limit
        </div>
      </header>

      <div class="dashboard">
        <div class="card controls">
          <h2>ðŸŽ® Kontrol Simulasi</h2>

          <div class="input-group">
            <div class="input-field">
              <label>Kecepatan Awal (m/s):</label>
              <input type="number" id="initialVelocity" value="20" step="5" />
            </div>
            <div class="input-field">
              <label>Percepatan (m/sÂ²):</label>
              <input type="number" id="acceleration" value="-4" step="0.5" />
            </div>
            <div class="input-field">
              <label>Jarak Mobil Depan (m):</label>
              <input type="number" id="obstacleDistance" value="80" step="10" />
            </div>
          </div>

          <div class="button-group">
            <button class="start-btn" onclick="startSimulation()">
              <span>â–¶</span> Start Simulation
            </button>
            <button class="reset-btn" onclick="resetSimulation()">
              <span>ðŸ”„</span> Reset
            </button>
            <button class="theory-btn" onclick="showTheory()">
              <span>ðŸ“š</span> Teori Matematika
            </button>
          </div>

          <div class="simulation-area" id="simulationArea">
            <div class="road"></div>
            <div class="car" id="ourCar">ðŸš—</div>
            <div class="car" id="frontCar">ðŸš™</div>
          </div>
        </div>

        <div class="card">
          <h2>ðŸ“Š Grafik Gerak</h2>
          <canvas id="motionChart" width="400" height="250"></canvas>
        </div>

        <div class="card">
          <h2>ðŸ“ˆ Analisis Real-time</h2>
          <div class="results">
            <div class="result-item">
              <div class="result-label">Jarak ke Mobil Depan</div>
              <div class="result-value" id="currentDistance">-</div>
              <div class="math-concept">
                <strong>Nilai Mutlak:</strong> |mobil_kita - mobil_depan|
              </div>
            </div>
            <div class="result-item">
              <div class="result-label">Kecepatan Saat Ini</div>
              <div class="result-value" id="currentVelocity">-</div>
            </div>
            <div class="result-item">
              <div class="result-label">Waktu Simulasi</div>
              <div class="result-value" id="currentTime">-</div>
            </div>
            <div class="result-item">
              <div class="result-label">Status</div>
              <div class="result-value" id="status">-</div>
              <div class="math-concept">
                <strong>Limit:</strong> t â†’ waktu_berhenti
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      let simulationInterval;
      let currentTime = 0;
      let chart;
      let brakePlayed = false;

      function nilaiMutlak(x) {
        return Math.abs(x);
      }

      function limitKecepatan(waktu, kecepatanAwal, percepatan) {
        const waktuBerhenti = -kecepatanAwal / percepatan;
        if (waktu >= waktuBerhenti) {
          return 0; // Mobil sudah berhenti
        }
        return kecepatanAwal + percepatan * waktu;
      }

      function startSimulation() {
        clearInterval(simulationInterval);

        const kecepatanAwal = parseFloat(
          document.getElementById("initialVelocity").value
        );
        const percepatan = parseFloat(
          document.getElementById("acceleration").value
        );
        const jarakMobilDepan = parseFloat(
          document.getElementById("obstacleDistance").value
        );

        currentTime = 0;
        const mobilKita = document.getElementById("ourCar");
        const mobilDepan = document.getElementById("frontCar");
        const areaSimulasi = document.getElementById("simulationArea");

        mobilKita.style.left = "50px";
        mobilDepan.style.left = 50 + jarakMobilDepan + "px";
        mobilKita.style.transform = "scale(1) rotate(0deg)";
        mobilDepan.style.transform = "scale(1) rotate(0deg)";
        mobilKita.textContent = "ðŸš—";
        mobilDepan.textContent = "ðŸš™";
        areaSimulasi.style.background =
          "linear-gradient(180deg, #2c3e50, #34495e)";
        areaSimulasi.style.animation = "none";

        const dataWaktu = [];
        const dataKecepatan = [];
        const dataJarak = [];

        const ctx = document.getElementById("motionChart").getContext("2d");
        if (chart) {
          chart.destroy();
        }

        chart = new Chart(ctx, {
          type: "line",
          data: {
            labels: dataWaktu,
            datasets: [
              {
                label: "Kecepatan (m/s)",
                data: dataKecepatan,
                borderColor: "#ff6b6b",
                backgroundColor: "rgba(255, 107, 107, 0.1)",
                borderWidth: 3,
                tension: 0.4,
              },
              {
                label: "Jarak ke Mobil Depan (m)",
                data: dataJarak,
                borderColor: "#4ecdc4",
                backgroundColor: "rgba(78, 205, 196, 0.1)",
                borderWidth: 3,
                tension: 0.4,
              },
            ],
          },
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: "Analisis Gerak Mobil",
                color: "#fff",
                font: { size: 16 },
              },
              legend: {
                labels: { color: "#fff" },
              },
            },
            scales: {
              x: {
                ticks: { color: "#bbb" },
                grid: { color: "rgba(255,255,255,0.1)" },
              },
              y: {
                beginAtZero: true,
                ticks: { color: "#bbb" },
                grid: { color: "rgba(255,255,255,0.1)" },
              },
            },
          },
        });

        simulationInterval = setInterval(() => {
          currentTime += 0.1;

          const kecepatanSaatIni = limitKecepatan(
            currentTime,
            kecepatanAwal,
            percepatan
          );

          const posisiMobilKita =
            50 +
            (kecepatanAwal * currentTime +
              0.5 * percepatan * currentTime * currentTime);

          const posisiMobilDepan = 50 + jarakMobilDepan;

          const jarakAntarMobil = nilaiMutlak(
            posisiMobilDepan - posisiMobilKita
          );

          const posisiX = Math.min(Math.max(posisiMobilKita, 50), 600);
          mobilKita.style.left = posisiX + "px";
          mobilKita.style.transform = "scaleX(-1)";

          document.getElementById("currentDistance").textContent =
            jarakAntarMobil.toFixed(2) + " m";
          document.getElementById("currentVelocity").textContent =
            kecepatanSaatIni.toFixed(2) + " m/s";
          document.getElementById("currentTime").textContent =
            currentTime.toFixed(1) + " s";

          dataWaktu.push(currentTime.toFixed(1));
          dataKecepatan.push(kecepatanSaatIni);
          dataJarak.push(jarakAntarMobil);
          chart.update();

          if (jarakAntarMobil < 5) {
            // ðŸ”Š Suara tabrakan
            const crash = document.getElementById("crashSound");
            crash.currentTime = 0;
            crash.play();

            document.getElementById("status").textContent = "ðŸ’¥ TABRAKAN!";
            document.getElementById("status").style.color = "#ff4444";

            mobilKita.style.transition = "all 0.5s ease";
            mobilDepan.style.transition = "all 0.5s ease";
            mobilKita.style.transform = "scale(1.3) rotate(-8deg)";
            mobilDepan.style.transform = "scale(1.3) rotate(8deg)";
            mobilKita.textContent = "ðŸ’¥";
            mobilDepan.textContent = "ðŸ’¥";
            areaSimulasi.style.background =
              "linear-gradient(45deg, #ff0000, #ff6b6b)";
            areaSimulasi.style.animation = "shake 0.5s ease-in-out";

            clearInterval(simulationInterval);
          } else if (kecepatanSaatIni <= 0) {
            // ðŸ”Š Suara aman
            const safe = document.getElementById("safeSound");
            safe.currentTime = 0;
            safe.play();

            document.getElementById("status").textContent = "ðŸ›‘ BERHENTI AMAN";
            document.getElementById("status").style.color = "#44ff44";
            clearInterval(simulationInterval);
          } else {
            document.getElementById("status").textContent = "â–¶ BERGERAK";
            document.getElementById("status").style.color = "#ffaa00";
          }
        }, 100); // Update setiap 100ms
      }

      function resetSimulation() {
        // ðŸ”Š Bunyi aman saat mobil mulai bergerak
        const safe = document.getElementById("safeSound");
        safe.currentTime = 0;
        safe.play();

        clearInterval(simulationInterval);
        currentTime = 0;

        const mobilKita = document.getElementById("ourCar");
        const mobilDepan = document.getElementById("frontCar");
        const areaSimulasi = document.getElementById("simulationArea");

        mobilKita.style.left = "50px";
        mobilDepan.style.left = "250px";
        mobilKita.style.transform = "scale(1) rotate(0deg)";
        mobilDepan.style.transform = "scale(1) rotate(0deg)";
        mobilKita.textContent = "ðŸš—";
        mobilDepan.textContent = "ðŸš™";
        areaSimulasi.style.background =
          "linear-gradient(180deg, #2c3e50, #34495e)";
        areaSimulasi.style.animation = "none";

        document.getElementById("currentDistance").textContent = "-";
        document.getElementById("currentVelocity").textContent = "-";
        document.getElementById("currentTime").textContent = "-";
        document.getElementById("status").textContent = "-";
        document.getElementById("status").style.color = "white";
      }

      function showTheory() {
        alert(`ðŸ”¬ TEORI MATEMATIKA YANG DIGUNAKAN:

1. ðŸ“ NILAI MUTLAK (Absolute Value)
   - Fungsi: |x| = x jika x â‰¥ 0, -x jika x < 0
   - Dalam simulator: |posisi_mobil_kita - posisi_mobil_depan|
   - Hasil selalu positif â†’ representasi jarak fisik

2. ðŸ“ˆ LIMIT (Limit)
   - Analisis perilaku fungsi saat variabel mendekati nilai tertentu
   - Dalam simulator: v(t) = vâ‚€ + aÂ·t, dengan limit v(t) â†’ 0 saat t â†’ -vâ‚€/a
   - Menentukan kapan mobil berhenti

3. ðŸ“Š TURUNAN & INTEGRAL
   - Kecepatan = turunan posisi terhadap waktu
   - Posisi = integral kecepatan terhadap waktu

ðŸŽ¯ APLIKASI NYATA:
- Sistem pengereman otomatis (AEB)
- Jarak aman antar kendaraan
- Prediksi dan pencegahan kecelakaan`);
      }

      resetSimulation();
    </script>
    <audio id="crashSound">
      <source src="tabrakan.mp4" type="audio/mpeg" />
    </audio>
    <audio id="safeSound">
      <source src="rem aman 2.mp4" type="audio/mpeg" />
    </audio>
  </body>
</html>
